<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WDK åè®®äºŒç»´ç ç”Ÿæˆå™¨</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.1em;
      opacity: 0.9;
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      margin-bottom: 20px;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #e5e7eb;
    }

    .tab {
      padding: 12px 24px;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
      color: #6b7280;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
    }

    .tab.active {
      color: #667eea;
      border-bottom-color: #667eea;
      font-weight: 600;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #374151;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 12px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: #667eea;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 100px;
      font-family: monospace;
    }

    .btn {
      padding: 12px 30px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
      width: 100%;
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .btn:active {
      transform: translateY(0);
    }

    .result {
      display: none;
      margin-top: 30px;
      padding: 20px;
      background: #f9fafb;
      border-radius: 8px;
    }

    .result.show {
      display: block;
    }

    .qr-container {
      text-align: center;
      margin: 20px 0;
    }

    #qrcode {
      display: inline-block;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .protocol-data {
      background: #1f2937;
      color: #f3f4f6;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      font-family: monospace;
      font-size: 12px;
      white-space: pre-wrap;
      word-break: break-all;
    }

    .info-box {
      background: #e0e7ff;
      border-left: 4px solid #667eea;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 4px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ” WDK åè®®äºŒç»´ç ç”Ÿæˆå™¨</h1>
      <p>ç”Ÿæˆç¬¦åˆ WDK åè®®æ ‡å‡†çš„äºŒç»´ç ç”¨äºæµ‹è¯•</p>
    </div>

    <div class="card">
      <div class="info-box">
        <strong>ğŸ“‹ ä½¿ç”¨è¯´æ˜ï¼š</strong>
        <ul style="margin-top: 10px; margin-left: 20px;">
          <li>é€‰æ‹©æ¶ˆæ¯ç±»å‹ï¼ˆè½¬è´¦äº¤æ˜“ã€æ¶ˆæ¯ç­¾åã€æˆæƒè¯·æ±‚ã€åœ°å€ä¿¡æ¯ï¼‰</li>
          <li>å¡«å†™ç›¸å…³å‚æ•°</li>
          <li>ç‚¹å‡»"ç”ŸæˆäºŒç»´ç "æŒ‰é’®</li>
          <li>ä½¿ç”¨å†·é’±åŒ…æ‰«æç”Ÿæˆçš„äºŒç»´ç è¿›è¡Œæµ‹è¯•</li>
        </ul>
      </div>

      <div class="tabs">
        <button class="tab active" onclick="switchTab('transaction')">ğŸ’¸ è½¬è´¦äº¤æ˜“</button>
        <button class="tab" onclick="switchTab('message')">âœï¸ æ¶ˆæ¯ç­¾å</button>
        <button class="tab" onclick="switchTab('authorization')">ğŸ” æˆæƒè¯·æ±‚</button>
        <button class="tab" onclick="switchTab('address')">ğŸ“ åœ°å€ä¿¡æ¯</button>
      </div>

      <!-- è½¬è´¦äº¤æ˜“ -->
      <div id="transaction-tab" class="tab-content active">
        <div class="grid">
          <div class="form-group">
            <label>é“¾ç±»å‹ *</label>
            <select id="tx-chain">
              <option value="BTC">Bitcoin (BTC)</option>
              <option value="ETH">Ethereum (ETH)</option>
              <option value="BNB">BNB Chain</option>
            </select>
          </div>
          <div class="form-group">
            <label>ç½‘ç»œ *</label>
            <select id="tx-network">
              <option value="mainnet">ä¸»ç½‘ (Mainnet)</option>
              <option value="testnet">æµ‹è¯•ç½‘ (Testnet)</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label>å‘é€æ–¹åœ°å€ *</label>
          <input type="text" id="tx-from" placeholder="bc1p..." value="bc1p5cyxnuxmeuwuvkwfem96lqzszd02n6xdcjrs20cac6yqjjwudpxqkedrcr">
        </div>
        <div class="form-group">
          <label>æ¥æ”¶æ–¹åœ°å€ *</label>
          <input type="text" id="tx-to" placeholder="bc1q..." value="bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf5mdq">
        </div>
        <div class="grid">
          <div class="form-group">
            <label>è½¬è´¦é‡‘é¢ *</label>
            <input type="text" id="tx-amount" placeholder="0.001" value="0.001">
          </div>
          <div class="form-group">
            <label>æ‰‹ç»­è´¹ *</label>
            <input type="text" id="tx-fee" placeholder="0.00001" value="0.00001">
          </div>
        </div>
        <div class="form-group">
          <label>å¤‡æ³¨ (å¯é€‰)</label>
          <input type="text" id="tx-memo" placeholder="è½¬è´¦å¤‡æ³¨">
        </div>
        <button class="btn" onclick="generateTransactionQR()">ç”Ÿæˆè½¬è´¦äºŒç»´ç </button>
      </div>

      <!-- æ¶ˆæ¯ç­¾å -->
      <div id="message-tab" class="tab-content">
        <div class="form-group">
          <label>é“¾ç±»å‹ *</label>
          <select id="msg-chain">
            <option value="BTC">Bitcoin (BTC)</option>
            <option value="ETH">Ethereum (ETH)</option>
            <option value="BNB">BNB Chain</option>
          </select>
        </div>
        <div class="form-group">
          <label>ç­¾ååœ°å€ *</label>
          <input type="text" id="msg-address" placeholder="é’±åŒ…åœ°å€" value="bc1p5cyxnuxmeuwuvkwfem96lqzszd02n6xdcjrs20cac6yqjjwudpxqkedrcr">
        </div>
        <div class="form-group">
          <label>å¾…ç­¾åæ¶ˆæ¯ *</label>
          <textarea id="msg-message" placeholder="è¾“å…¥éœ€è¦ç­¾åçš„æ¶ˆæ¯å†…å®¹...">æ¬¢è¿ä½¿ç”¨ WDK é’±åŒ…ï¼è¿™æ˜¯ä¸€æ¡æµ‹è¯•ç­¾åæ¶ˆæ¯ã€‚</textarea>
        </div>
        <div class="form-group">
          <label>ç¼–ç æ ¼å¼</label>
          <select id="msg-encoding">
            <option value="utf8">UTF-8</option>
            <option value="hex">Hex</option>
            <option value="base64">Base64</option>
          </select>
        </div>
        <button class="btn" onclick="generateMessageQR()">ç”Ÿæˆæ¶ˆæ¯ç­¾åäºŒç»´ç </button>
      </div>

      <!-- æˆæƒè¯·æ±‚ -->
      <div id="authorization-tab" class="tab-content">
        <div class="form-group">
          <label>DApp åç§° *</label>
          <input type="text" id="auth-dapp" placeholder="MyDApp" value="æµ‹è¯•DApp">
        </div>
        <div class="form-group">
          <label>DApp ç½‘å€ *</label>
          <input type="text" id="auth-url" placeholder="https://example.com" value="https://test-dapp.com">
        </div>
        <div class="form-group">
          <label>é“¾ç±»å‹ *</label>
          <select id="auth-chain">
            <option value="BTC">Bitcoin (BTC)</option>
            <option value="ETH">Ethereum (ETH)</option>
            <option value="BNB">BNB Chain</option>
          </select>
        </div>
        <div class="form-group">
          <label>é’±åŒ…åœ°å€ *</label>
          <input type="text" id="auth-address" placeholder="é’±åŒ…åœ°å€" value="bc1p5cyxnuxmeuwuvkwfem96lqzszd02n6xdcjrs20cac6yqjjwudpxqkedrcr">
        </div>
        <div class="form-group">
          <label>è¯·æ±‚æƒé™ (å¤šä¸ªæƒé™ç”¨é€—å·åˆ†éš”) *</label>
          <input type="text" id="auth-permissions" placeholder="æŸ¥çœ‹åœ°å€,ç­¾åæ¶ˆæ¯,å‘é€äº¤æ˜“" value="æŸ¥çœ‹åœ°å€,ç­¾åæ¶ˆæ¯">
        </div>
        <div class="form-group">
          <label>æœ‰æ•ˆæœŸ (åˆ†é’Ÿ)</label>
          <input type="number" id="auth-expire" placeholder="5" value="5">
        </div>
        <button class="btn" onclick="generateAuthorizationQR()">ç”ŸæˆæˆæƒäºŒç»´ç </button>
      </div>

      <!-- åœ°å€ä¿¡æ¯ -->
      <div id="address-tab" class="tab-content">
        <div class="grid">
          <div class="form-group">
            <label>é“¾ç±»å‹ *</label>
            <select id="addr-chain">
              <option value="BTC">Bitcoin (BTC)</option>
              <option value="ETH">Ethereum (ETH)</option>
              <option value="BNB">BNB Chain</option>
            </select>
          </div>
          <div class="form-group">
            <label>ç½‘ç»œ *</label>
            <select id="addr-network">
              <option value="mainnet">ä¸»ç½‘ (Mainnet)</option>
              <option value="testnet">æµ‹è¯•ç½‘ (Testnet)</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label>é’±åŒ…åœ°å€ *</label>
          <input type="text" id="addr-address" placeholder="bc1p..." value="bc1p5cyxnuxmeuwuvkwfem96lqzszd02n6xdcjrs20cac6yqjjwudpxqkedrcr">
        </div>
        <div class="form-group">
          <label>å…¬é’¥ (å¯é€‰)</label>
          <input type="text" id="addr-publickey" placeholder="02...">
        </div>
        <div class="form-group">
          <label>åœ°å€æ ‡ç­¾ (å¯é€‰)</label>
          <input type="text" id="addr-label" placeholder="æˆ‘çš„BTCé’±åŒ…" value="æˆ‘çš„å†·é’±åŒ…">
        </div>
        <button class="btn" onclick="generateAddressQR()">ç”Ÿæˆåœ°å€äºŒç»´ç </button>
      </div>

      <!-- ç»“æœæ˜¾ç¤º -->
      <div id="result" class="result">
        <h3 style="margin-bottom: 15px;">âœ… äºŒç»´ç ç”ŸæˆæˆåŠŸ</h3>
        <div class="qr-container">
          <div id="qrcode"></div>
        </div>
        <div style="margin-top: 20px;">
          <h4 style="margin-bottom: 10px;">åè®®æ•°æ®ï¼š</h4>
          <div class="protocol-data" id="protocol-data"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function switchTab(tabName) {
      // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
      });
      
      // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„æ´»åŠ¨çŠ¶æ€
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾å†…å®¹
      document.getElementById(`${tabName}-tab`).classList.add('active');
      
      // æ¿€æ´»å¯¹åº”çš„æ ‡ç­¾
      event.target.classList.add('active');
    }

    function createProtocolMessage(type, data) {
      return {
        protocol: 'WDK',
        version: '1.0.0',
        type: type,
        timestamp: Date.now(),
        data: data
      };
    }

    function showResult(message) {
      const resultDiv = document.getElementById('result');
      const qrcodeDiv = document.getElementById('qrcode');
      const protocolDataDiv = document.getElementById('protocol-data');
      
      // æ¸…ç©ºä¹‹å‰çš„äºŒç»´ç 
      qrcodeDiv.innerHTML = '';
      
      // ç”Ÿæˆæ–°äºŒç»´ç 
      QRCode.toCanvas(message, {
        width: 300,
        margin: 2,
        errorCorrectionLevel: 'M'
      }, function(error, canvas) {
        if (error) {
          alert('ç”ŸæˆäºŒç»´ç å¤±è´¥: ' + error);
          return;
        }
        qrcodeDiv.appendChild(canvas);
      });
      
      // æ˜¾ç¤ºåè®®æ•°æ®
      protocolDataDiv.textContent = JSON.stringify(JSON.parse(message), null, 2);
      
      // æ˜¾ç¤ºç»“æœåŒºåŸŸ
      resultDiv.classList.add('show');
      
      // æ»šåŠ¨åˆ°ç»“æœ
      resultDiv.scrollIntoView({ behavior: 'smooth' });
    }

    function generateTransactionQR() {
      const chain = document.getElementById('tx-chain').value;
      const network = document.getElementById('tx-network').value;
      const from = document.getElementById('tx-from').value;
      const to = document.getElementById('tx-to').value;
      const amount = document.getElementById('tx-amount').value;
      const fee = document.getElementById('tx-fee').value;
      const memo = document.getElementById('tx-memo').value;
      
      if (!from || !to || !amount || !fee) {
        alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µï¼');
        return;
      }
      
      const txData = {
        txId: `tx_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,
        chain: chain,
        network: network,
        from: from,
        to: to,
        amount: amount,
        fee: fee
      };
      
      if (memo) {
        txData.memo = memo;
      }
      
      const message = createProtocolMessage('SIGN_TRANSACTION_REQUEST', txData);
      showResult(JSON.stringify(message));
    }

    function generateMessageQR() {
      const chain = document.getElementById('msg-chain').value;
      const address = document.getElementById('msg-address').value;
      const messageText = document.getElementById('msg-message').value;
      const encoding = document.getElementById('msg-encoding').value;
      
      if (!address || !messageText) {
        alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µï¼');
        return;
      }
      
      const msgData = {
        messageId: `msg_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,
        chain: chain,
        address: address,
        message: messageText,
        encoding: encoding
      };
      
      const message = createProtocolMessage('SIGN_MESSAGE_REQUEST', msgData);
      showResult(JSON.stringify(message));
    }

    function generateAuthorizationQR() {
      const dapp = document.getElementById('auth-dapp').value;
      const dappUrl = document.getElementById('auth-url').value;
      const chain = document.getElementById('auth-chain').value;
      const address = document.getElementById('auth-address').value;
      const permissionsStr = document.getElementById('auth-permissions').value;
      const expireMinutes = parseInt(document.getElementById('auth-expire').value) || 5;
      
      if (!dapp || !dappUrl || !address || !permissionsStr) {
        alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µï¼');
        return;
      }
      
      const permissions = permissionsStr.split(',').map(p => p.trim());
      const expireTime = Date.now() + expireMinutes * 60 * 1000;
      
      const authData = {
        requestId: `auth_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,
        dapp: dapp,
        dappUrl: dappUrl,
        chain: chain,
        address: address,
        permissions: permissions,
        expireTime: expireTime
      };
      
      const message = createProtocolMessage('AUTHORIZATION_REQUEST', authData);
      showResult(JSON.stringify(message));
    }

    function generateAddressQR() {
      const chain = document.getElementById('addr-chain').value;
      const network = document.getElementById('addr-network').value;
      const address = document.getElementById('addr-address').value;
      const publicKey = document.getElementById('addr-publickey').value;
      const label = document.getElementById('addr-label').value;
      
      if (!address) {
        alert('è¯·å¡«å†™é’±åŒ…åœ°å€ï¼');
        return;
      }
      
      const addrData = {
        chain: chain,
        network: network,
        address: address
      };
      
      if (publicKey) {
        addrData.publicKey = publicKey;
      }
      
      if (label) {
        addrData.label = label;
      }
      
      const message = createProtocolMessage('ADDRESS_INFO', addrData);
      showResult(JSON.stringify(message));
    }
  </script>
</body>
</html>
