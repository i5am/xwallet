# 观察钱包和签名功能使用指南

## 📋 功能概览

### 1. 观察钱包 👁️

**什么是观察钱包？**
- 只读模式的钱包，不包含私钥
- 只能查看余额和交易历史
- 无法发送交易和签名消息
- 适合监控冷钱包余额

**如何创建观察钱包？**

1. 点击"➕ 导入钱包"
2. 选择钱包类型：**观察钱包**
3. 选择区块链：BTC 或 ETH
4. 输入钱包地址（支持扫描二维码）
   - BTC: `bc1q...` 或 `1...` 或 `3...`
   - ETH: `0x...` (42 字符)
5. 点击"导入钱包"

**特点：**
- ✅ 可以查看余额
- ✅ 可以查看交易历史
- ✅ 可以生成接收地址二维码
- ❌ 无法发送交易
- ❌ 无法签名消息
- ❌ 无法查看私钥/助记词

---

### 2. 钱包模式切换 ⚙️

**在设置中切换钱包模式**

1. 选择一个钱包
2. 点击右上角 ⚙️ **设置**
3. 找到"当前钱包模式"选项
4. 选择要切换的模式

**三种模式对比：**

| 功能 | 🔥 热钱包 | ❄️ 冷钱包 | 👁️ 观察钱包 |
|------|---------|----------|-----------|
| 余额同步 | 自动 | 手动 | 自动 |
| 发送交易 | ✅ | ✅ | ❌ |
| 签名消息 | ✅ | ✅ | ❌ |
| 网络连接 | 在线 | 离线 | 在线 |
| 私钥存储 | 加密存储 | 加密存储 | 无 |
| 安全性 | 中 | 高 | 最高 |

**切换规则：**

✅ **热钱包 ↔️ 冷钱包**
- 可以随意切换
- 不会丢失私钥
- 只改变连接模式

⚠️ **热/冷钱包 → 观察钱包**
- 需要确认操作
- **不可逆！** 私钥将被永久删除
- 切换后无法恢复为热/冷钱包
- 请确保已备份助记词！

❌ **观察钱包 → 热/冷钱包**
- 不可能！观察钱包没有私钥
- 需要重新导入助记词或私钥

---

### 3. 签名功能扫描 ✍️

**扫描未签名交易**

1. 打开"✍️ 签名"对话框
2. 点击 📷 **扫描按钮**（蓝色）
3. 扫描未签名交易二维码
4. 自动填充消息内容
5. 点击"签名并生成二维码"

**扫描已签名交易**

1. 在"发送"对话框中生成未签名交易
2. 冷钱包扫描并签名
3. 点击 📷 **扫描签名结果**
4. 扫描已签名交易二维码
5. 自动广播到区块链

---

### 4. OCR 文字识别 📷 (开发中)

**功能说明：**
- 调用摄像头拍照
- 使用 Tesseract.js OCR 识别文字
- 自动填充到签名消息框
- 然后进行签名

**使用场景：**
- 识别纸质备份的助记词
- 识别屏幕上的文字内容
- 快速输入长文本

**当前状态：**
🚧 UI 按钮已添加（绿色相机图标）
🚧 OCR 引擎待集成

---

## 🔄 完整的离线交易流程

### 场景：热钱包生成 → 冷钱包签名 → 热钱包广播

#### 步骤 1: 热钱包生成未签名交易

1. 在热钱包打开"发送"对话框
2. 填写接收地址、金额、手续费
3. 点击"生成签名请求"
4. 显示未签名交易二维码

#### 步骤 2: 冷钱包签名

1. 在冷钱包打开"✍️ 签名"对话框
2. 点击 📷 扫描按钮（蓝色）
3. 扫描热钱包的未签名交易二维码
4. 自动填充交易内容
5. 点击"签名并生成二维码"
6. 显示已签名交易二维码

#### 步骤 3: 热钱包广播

1. 在热钱包的发送对话框
2. 点击 📷 **扫描签名结果**
3. 扫描冷钱包的已签名交易二维码
4. 自动广播到区块链
5. 显示交易 ID (TXID)

---

## 🔐 安全最佳实践

### 观察钱包

✅ **推荐使用场景：**
- 监控冷钱包余额
- 查看交易历史
- 生成接收二维码
- 公开展示钱包地址

❌ **不推荐：**
- 作为主要钱包使用
- 存储大额资产

### 冷钱包

✅ **推荐使用场景：**
- 存储大额资产
- 长期持有
- 离线签名
- 最高安全级别

⚠️ **注意事项：**
- 定期备份助记词
- 使用前断开网络
- 签名后立即关闭应用

### 热钱包

✅ **推荐使用场景：**
- 日常小额支付
- 频繁交易
- 快速转账

⚠️ **注意事项：**
- 不要存储大额资产
- 定期转账到冷钱包
- 使用强密码保护

---

## 📱 界面指南

### 钱包列表图标说明

- 🔥 = 热钱包（在线，自动同步）
- ❄️ = 冷钱包（离线，手动刷新）
- 👁️ = 观察钱包（只读模式）

### 按钮状态

- 🔒 = 功能被锁定（观察钱包）
- 📷 = 扫描二维码
- 🔄 = 刷新余额（冷钱包）
- ⚙️ = 设置（切换模式）

---

## 🐛 常见问题

### Q: 观察钱包可以切换回热钱包吗？

**A:** 不可以！观察钱包没有私钥，无法切换。如需使用热钱包功能，请重新导入助记词或私钥。

### Q: 切换为观察钱包后能恢复吗？

**A:** 不能！切换为观察钱包会永久删除私钥。如果没有备份助记词，资产将无法找回。

### Q: 观察钱包如何查看余额？

**A:** 观察钱包会自动连接区块链 API 查询余额，无需手动刷新。

### Q: 冷钱包如何刷新余额？

**A:** 点击余额旁边的 🔄 按钮，手动查询最新余额。

### Q: OCR 功能什么时候上线？

**A:** OCR 功能正在开发中，将集成 Tesseract.js 引擎。预计下个版本上线。

---

## 📚 相关文档

- [开发日志](./DEVELOPMENT_LOG.md) - 完整的开发记录
- [密码功能](./PASSWORD_FEATURE.md) - 密码设置和使用
- [离线交易流程](./OFFLINE_TRANSACTION_FLOW.md) - 详细的交易流程

---

## 🎯 下一步计划

- [ ] 集成 Tesseract.js OCR 引擎
- [ ] 对接真实区块链 API
- [ ] 实现交易历史实时更新
- [ ] 添加多签钱包支持
- [ ] 硬件钱包集成

---

**版本**: v1.1.0  
**更新日期**: 2025-10-28  
**作者**: XWallet Team
