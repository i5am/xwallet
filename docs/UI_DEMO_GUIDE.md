# 密码功能 UI 演示指南

## 功能入口

### 1. 设置密码入口
**路径**: 右上角"设置"按钮 → 密码设置

**截图位置**:
```
┌─────────────────────────────────────────┐
│  XWallet            [⚙️ 设置]           │
├─────────────────────────────────────────┤
│  设置对话框                              │
│  ┌───────────────────────────────────┐  │
│  │ 密码设置                          │  │
│  │ ┌─────────────────────────────┐   │  │
│  │ │ 🔒 密码已设置               │   │  │
│  │ │ [修改密码]                  │   │  │
│  │ └─────────────────────────────┘   │  │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
```

**首次设置**:
- 显示: "尚未设置密码"
- 按钮: "设置密码" (蓝色)

**已设置密码**:
- 显示: "🔒 密码已设置" (绿色)
- 按钮: "修改密码" (蓝色)

---

### 2. 查看钱包详情入口
**路径**: 我的钱包 → 钱包卡片 → 锁图标 🔒

**截图位置**:
```
┌─────────────────────────────────────────┐
│  我的钱包          [导入] [创建]        │
├─────────────────────────────────────────┤
│  ┌───────────────────────────────────┐  │
│  │ BTC热钱包            🔥     [🔒]  │  │
│  │ bc1pjp...nrr3                     │  │
│  └───────────────────────────────────┘  │
│  ┌───────────────────────────────────┐  │
│  │ ETH冷钱包            ❄️     [🔒]  │  │
│  │ 0x1234...5678                     │  │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
```

点击右侧的 🔒 图标即可触发密码验证流程。

---

## UI 界面展示

### 界面 1: 设置密码对话框

**显示条件**: 
- 首次设置密码时
- 修改密码时

**界面元素**:
```
┌──────────────────────────────────────────┐
│  🔒 设置密码                        [X]   │
├──────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────────────┐  │
│  │ 🔐 设置密码后，查看私钥和助记词   │  │
│  │    时需要输入密码验证             │  │
│  └────────────────────────────────────┘  │
│                                          │
│  密码 (Password)                         │
│  ┌────────────────────────────────────┐  │
│  │ ••••••••                           │  │
│  └────────────────────────────────────┘  │
│                                          │
│  确认密码 (Confirm)                      │
│  ┌────────────────────────────────────┐  │
│  │ ••••••••                           │  │
│  └────────────────────────────────────┘  │
│                                          │
│     [取消]              [确认]           │
└──────────────────────────────────────────┘
```

**字段说明**:
- **密码**: 至少6位字符
- **确认密码**: 必须与密码一致
- **提示框**: 蓝色背景，说明密码用途

**验证规则**:
- ✅ 密码长度 ≥ 6
- ✅ 两次输入一致
- ❌ 密码为空
- ❌ 两次输入不一致

---

### 界面 2: 密码验证对话框

**显示条件**: 
- 点击钱包列表的锁图标时
- 执行需要密码的操作时

**界面元素**:
```
┌──────────────────────────────────────────┐
│  🔒 输入密码                        [X]   │
├──────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────────────┐  │
│  │ 🔒 请输入密码以查看钱包详情       │  │
│  └────────────────────────────────────┘  │
│                                          │
│  密码 (Password)                         │
│  ┌────────────────────────────────────┐  │
│  │ ••••••••                           │  │
│  └────────────────────────────────────┘  │
│                                          │
│     [取消]              [确认]           │
└──────────────────────────────────────────┘
```

**交互特性**:
- 输入框自动获取焦点
- 支持按 `Enter` 键提交
- 密码输入显示为 •••

**验证流程**:
1. 输入密码
2. 点击"确认"或按 Enter
3. 系统验证密码哈希
4. 验证成功 → 显示钱包详情
5. 验证失败 → 弹出错误提示

---

### 界面 3: 钱包详情对话框

**显示条件**: 
- 密码验证成功后

**界面元素**:
```
┌──────────────────────────────────────────────────────┐
│  钱包详情                                       [X]   │
├──────────────────────────────────────────────────────┤
│  ┌────────────────────────────────────────────────┐  │
│  │ 钱包名称                                       │  │
│  │ BTC热钱包                                      │  │
│  ├────────────────────────────────────────────────┤  │
│  │ 钱包类型                                       │  │
│  │ 🔥 热钱包                                      │  │
│  ├────────────────────────────────────────────────┤  │
│  │ 区块链                                         │  │
│  │ BTC (mainnet)                                  │  │
│  ├────────────────────────────────────────────────┤  │
│  │ 钱包地址                                       │  │
│  │ ┌──────────────────────────────────────────┐  │  │
│  │ │ bc1pjp...nrr3                            │  │  │
│  │ └──────────────────────────────────────────┘  │  │
│  │ 📋 复制地址                                    │  │
│  ├────────────────────────────────────────────────┤  │
│  │ 公钥                              [👁️ 显示]    │  │
│  │ ┌──────────────────────────────────────────┐  │  │
│  │ │ 02abc...def                              │  │  │
│  │ └──────────────────────────────────────────┘  │  │
│  │ 📋 复制公钥                                    │  │
│  ├────────────────────────────────────────────────┤  │
│  │ 私钥                              [👁️ 显示]    │  │
│  │ ┌──────────────────────────────────────────┐  │  │
│  │ │ ••••••••••••••••••••                     │  │  │
│  │ └──────────────────────────────────────────┘  │  │
│  ├────────────────────────────────────────────────┤  │
│  │ 助记词                            [👁️ 显示]    │  │
│  │ ┌──────────────────────────────────────────┐  │  │
│  │ │ ••• ••• ••• ••• ••• ••• ••• ••• ••• •••  │  │  │
│  │ └──────────────────────────────────────────┘  │  │
│  ├────────────────────────────────────────────────┤  │
│  │ 创建时间                                       │  │
│  │ 2024-01-15 14:30:25                            │  │
│  └────────────────────────────────────────────────┘  │
│                                                      │
│  ┌────────────────────────────────────────────────┐  │
│  │ ⚠️ 请妥善保管私钥和助记词，切勿泄露给他人！   │  │
│  └────────────────────────────────────────────────┘  │
│                                                      │
│     [删除钱包]                  [关闭]               │
└──────────────────────────────────────────────────────┘
```

**功能区域**:

1. **基本信息区** (灰色背景):
   - 钱包名称
   - 钱包类型 (🔥热钱包/❄️冷钱包/👁️观察钱包)
   - 区块链和网络

2. **地址信息区** (白色背景):
   - 钱包地址 (可复制)
   - 公钥 (可复制)

3. **敏感信息区** (默认隐藏):
   - 私钥 (红色背景，可显示/隐藏/复制)
   - 助记词 (黄色背景，可显示/隐藏/复制)

4. **时间信息区**:
   - 创建时间 (本地格式)

5. **安全提示区** (红色背景):
   - 警告文字

6. **操作按钮区**:
   - 删除钱包 (红色按钮)
   - 关闭 (主色按钮)

---

## 交互流程图

### 流程 1: 设置密码

```
开始
  ↓
点击"设置"按钮
  ↓
打开设置对话框
  ↓
点击"设置密码"按钮
  ↓
显示密码设置对话框
  ↓
输入密码 (至少6位)
  ↓
输入确认密码
  ↓
点击"确认"
  ↓
验证密码 ──→ 长度不足 ──→ 提示错误
  ↓                ↓
  OK              不一致 ──→ 提示错误
  ↓
保存密码哈希到 localStorage
  ↓
显示成功提示
  ↓
关闭对话框
  ↓
结束
```

### 流程 2: 查看钱包详情

```
开始
  ↓
点击钱包卡片的 🔒 图标
  ↓
检查是否已设置密码
  ↓
未设置 ──→ 提示先设置密码 ──→ 结束
  ↓
已设置
  ↓
显示密码验证对话框
  ↓
输入密码
  ↓
点击"确认"或按 Enter
  ↓
验证密码
  ↓
错误 ──→ 提示密码错误 ──→ 重新输入
  ↓
正确
  ↓
显示钱包详情对话框
  ↓
用户操作:
  • 查看/复制地址
  • 查看/复制公钥
  • 显示/隐藏私钥 (默认隐藏)
  • 显示/隐藏助记词 (默认隐藏)
  • 删除钱包 (需要确认)
  ↓
点击"关闭"
  ↓
关闭对话框
  ↓
结束
```

---

## 颜色方案

### 对话框背景
- **主背景**: 白色 / 深色模式灰色
- **信息提示框**: 
  - 蓝色 (一般信息)
  - 黄色 (警告)
  - 红色 (危险/删除)

### 按钮颜色
- **主按钮**: 蓝色渐变 (#667eea → #764ba2)
- **次按钮**: 灰色
- **危险按钮**: 红色

### 文字颜色
- **标题**: 深灰色 / 白色
- **正文**: 中灰色 / 浅灰色
- **标签**: 浅灰色

### 输入框
- **背景**: 白色 / 深灰色
- **边框**: 浅灰色
- **焦点**: 蓝色边框

---

## 响应式适配

### 桌面端 (Desktop)
- 对话框宽度: 最大 500px
- 居中显示
- 遮罩层半透明黑色

### 移动端 (Mobile)
- 对话框宽度: 90% 视口宽度
- 最大高度: 90vh
- 支持滚动

### 触摸优化
- 按钮高度: 最小 44px
- 点击区域足够大
- 支持手势滑动关闭

---

## 无障碍支持

### 键盘导航
- ✅ Tab 键切换焦点
- ✅ Enter 键提交表单
- ✅ Esc 键关闭对话框

### 屏幕阅读器
- ✅ 语义化 HTML 标签
- ✅ aria-label 属性
- ✅ 表单 label 关联

### 视觉优化
- ✅ 高对比度文字
- ✅ 清晰的图标
- ✅ 足够的点击区域

---

## 动画效果

### 对话框出现
- 淡入 + 缩放动画
- 持续时间: 200ms
- 缓动函数: ease-out

### 对话框消失
- 淡出 + 缩放动画
- 持续时间: 150ms
- 缓动函数: ease-in

### 显示/隐藏私钥
- 平滑过渡
- 持续时间: 200ms

---

## 测试清单

### 功能测试
- [ ] 设置密码 (首次)
- [ ] 设置密码 (修改)
- [ ] 密码验证 (正确)
- [ ] 密码验证 (错误)
- [ ] 显示钱包详情
- [ ] 显示/隐藏私钥
- [ ] 显示/隐藏助记词
- [ ] 复制地址
- [ ] 复制公钥
- [ ] 复制私钥
- [ ] 复制助记词
- [ ] 删除钱包

### 边界测试
- [ ] 密码少于6位
- [ ] 密码为空
- [ ] 两次密码不一致
- [ ] 未设置密码时查看详情
- [ ] 观察钱包 (无私钥)

### 兼容性测试
- [ ] Chrome/Edge
- [ ] Firefox
- [ ] Safari
- [ ] iOS Safari
- [ ] Android Chrome

### 安全测试
- [ ] 密码加密存储
- [ ] 私钥默认隐藏
- [ ] 离开页面清除敏感信息
- [ ] localStorage 加密

---

## 开发注意事项

### 状态管理
```typescript
// 密码相关状态
showPasswordDialog: boolean         // 是否显示密码验证框
showSetPasswordDialog: boolean      // 是否显示设置密码框
password: string                    // 输入的密码
confirmPassword: string             // 确认密码
passwordAction: 'view' | 'delete' | null  // 密码验证后的操作

// 钱包详情状态
showWalletDetails: boolean          // 是否显示详情
selectedWalletForAction: Wallet | null  // 当前操作的钱包
showPrivateKey: boolean             // 是否显示私钥
showMnemonic: boolean               // 是否显示助记词
```

### 事件处理
```typescript
// 设置密码
handleSetPassword()

// 查看详情
handleViewWalletDetails(wallet)

// 验证密码
handlePasswordVerify()

// 删除钱包
handleDeleteWallet(walletId)
```

### 数据清理
- 关闭对话框时清空密码输入
- 关闭详情时重置显示状态
- 避免敏感信息残留

---

## 更新日志

**2024-01-15**: 初始版本
- 实现密码设置对话框
- 实现密码验证对话框
- 实现钱包详情对话框
- 添加所有交互逻辑
- 完善UI样式
